1. Struktura Projektu (Architektura v2.0)

SystÃ©m je rozdÄ›lenÃ½ tak, aby kaÅ¾dÃ¡ ÄÃ¡st dÄ›lala jen jednu vÄ›c, ale poÅ™Ã¡dnÄ›:

coach.js (Root): HlavnÃ­ orchestrÃ¡tor. Å˜Ã­dÃ­ sbÄ›r dat, generovÃ¡nÃ­ a spouÅ¡tÃ­ interaktivnÃ­ upload.
+1

/services/aiService.js: Mozek trenÃ©ra. SklÃ¡dÃ¡ prompty ze sloÅ¾ky /prompts a komunikuje s Gemini API.
+1

/services/hevyService.js: Konektor pro Hevy API (stahovÃ¡nÃ­ rutin, historie a nahrÃ¡vÃ¡nÃ­ zmÄ›n).

NOVÃ‰: /services/storageService.js: Nahradil starou sprÃ¡vu Google Tabulky. NynÃ­ Äte tvÅ¯j profil, maxima a posouvÃ¡ tÃ½dny ÄistÄ› z lokÃ¡lnÃ­ho disku (config/user_db.json).

NOVÃ‰: runDiscovery.js & Discovery moduly: ÃšplnÄ› novÃ½ mozek pro cviky. SpouÅ¡tÄ›Ä diriguje stahovÃ¡nÃ­ z Hevy, nachÃ¡zÃ­ novinky pÅ™es comparisonService.js a inteligentnÄ› je analyzuje pomocÃ­ discoveryService.js.

writer.js & uploader.js (Root): TransformÃ¡tor dat, kterÃ½ ÄistÃ­ sloÅ¾ku /exports a pÅ™ipravuje JSONy pro upload. NavÃ­c obsahuje "pojistku" proti smazanÃ½m warmupÅ¯m. Uploader nÃ¡slednÄ› bere soubory z /exports a "stÅ™Ã­lÃ­" je do Hevy Cloudu.
+1

/prompts/: SloÅ¾ka s modulÃ¡rnÃ­mi pravidly (role.txt, safety.txt, components.txt, output.txt a novÄ› discovery.txt a progression.txt).

ğŸ§  2. TrenÃ©rskÃ¡ Logika a Ochrany

Pravidla pro AI jsou nastavena tak, aby tÄ› nezniÄila a respektovala tvÃ© limity:

Rest Management: PovinnÃ© pauzy 120-180s u hlavnÃ­ch cvikÅ¯, i kdyby v Å¡ablonÄ› bylo mÃ©nÄ›.

NezruÅ¡itelnÃ© prvky: Kardio intervaly a stÅ™ed tÄ›la (Core) nesmÃ­ Gemini z plÃ¡nu vyhodit.

Autoregulace: VÃ½poÄet vah na zÃ¡kladÄ› E-1RM z historie a aktuÃ¡lnÃ­ch 1RM z tabulky.

NOVÃ‰: InteligentnÃ­ Progrese: DÃ­ky souboru smart_catalog.json bot vÃ­, kdy u cviku (napÅ™. shybÅ¯) pÅ™ekroÄÃ­Å¡ cÃ­lovÃ½ poÄet opakovÃ¡nÃ­ a automaticky tÄ› pÅ™epne na tÄ›Å¾Å¡Ã­ variantu (napÅ™. se zÃ¡tÄ›Å¾Ã­).

ğŸ’¾ 3. DatovÃ½ Tok (Data Flow pro v2.0)

Takhle pÅ™esnÄ› putujÃ­ data, kdyÅ¾ klikneÅ¡ na mobilu:

SbÄ›r: coach.js uÅ¾ nepotÅ™ebuje Google API. BleskovÄ› naÄte tvÅ¯j profil a maxima z lokÃ¡lnÃ­ho disku a historii s rutiny si vytÃ¡hne z Hevy.

GenerovÃ¡nÃ­: Gemini vytvoÅ™Ã­ plÃ¡n podle pravidel v /prompts. RPE se zapisuje do poznÃ¡mek (notes).
+1

Automatizace: DÃ­ky pÅ™Ã­kazu echo "ano" | v GitHub Actions se tento krok potvrdÃ­ sÃ¡m. Po potvrzenÃ­ "ano" poÅ¡le uploader.js data do mobilu a lokÃ¡lnÃ­ databÃ¡ze (dÅ™Ã­ve sheetsService.js) posune trÃ©ninkovÃ½ tÃ½den.
+1

ğŸ› ï¸ 4. VyÅ™eÅ¡enÃ© Bugy a VylepÅ¡enÃ­ (v2.0)

Tohle uÅ¾ mÃ¡me za sebou a systÃ©m je proti tomu imunnÃ­:

MazÃ¡nÃ­ WarmupÅ¯: Gemini uÅ¾ nesmÃ­ mazat tvoje manuÃ¡lnÄ› zadanÃ© rozcviÄovacÃ­ sÃ©rie. Kdyby se o to pokusilo, writer.js je tam natvrdo vrÃ¡tÃ­.
+1

OdstranÄ›nÃ­ CloudovÃ© ZÃ¡vislosti: Zcela jsme eliminovali Google Sheets API. Å½Ã¡dnÃ© limity ÄtenÃ­, Å¾Ã¡dnÃ© vyprÅ¡enÃ© tokeny. VÅ¡e leÅ¾Ã­ bezpeÄnÄ› ve sloÅ¾ce config/.

Ãšspora AI TokenÅ¯: Modul comparisonService.js zajiÅ¡Å¥uje, Å¾e Gemini analyzuje pouze novÄ› pÅ™idanÃ© cviky z Hevy, ÄÃ­mÅ¾ Å¡etÅ™Ã­me Äas i API kvÃ³ty.
